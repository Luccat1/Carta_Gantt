---
phase: 1
plan: 1
wave: 1
---

# Plan 1.1: Project Setup & Structure Initialization

## Objective
Initialize the Google Apps Script project structure, ensuring all necessary sheets (`CONFIG`, `TASKS`, `LOOKUPS`, `GANTT_VIEW`) exist with correct headers, and create the custom menu for user interaction.

## Context
- .gsd/SPEC.md (REQ-01)
- .gsd/REQUIREMENTS.md
- User's existing file: `Main` (likely an empty placeholder)

## Tasks

<task type="auto">
  <name>Create Project Config & Constants</name>
  <files>Config.gs</files>
  <action>
    Create `Config.gs` to store sheet names and other constants.
    - Define constants for sheet names: `SHEET_CONFIG`, `SHEET_TASKS`, `SHEET_LOOKUPS`, `SHEET_GANTT`.
    - Define header arrays for `TASKS` sheet (Area, Tarea, Subarea, Responsable, Ejecuta, Inicio, Fin, Estado, Etiquetas, Material, ID).
    - Define configuration defaults.
  </action>
  <verify>test-path Config.gs</verify>
  <done>Config.gs exists with defined constants.</done>
</task>

<task type="auto">
  <name>Implement Menu & Structure Initialization</name>
  <files>Main.gs</files>
  <action>
    Update or create `Main.gs`.
    - Implement `onOpen()` to create a menu "Gantt ⚙️" with items:
      - "Inicializar / reparar estructura" -> `initStructure`
      - "Generar calendario" -> `buildCalendarFromConfig`
      - "Refrescar vista Gantt" -> `refreshGanttView`
      - "Rollover anual" -> `rolloverToNextYear`
    - Implement `initStructure()`:
      - Check if each sheet exists; if not, create it.
      - For `TASKS`, if created or empty, set the header row using constants.
      - For `CONFIG`, if created, set default headers (Year, Month) and values (current year, current month).
  </action>
  <verify>test-path Main.gs</verify>
  <done>Main.gs contains onOpen and initStructure functions.</done>
</task>

## Success Criteria
- [ ] `Config.gs` constants are used in `Main.gs`.
- [ ] `initStructure` creates missing sheets idempotently.
